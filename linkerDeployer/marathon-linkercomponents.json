{
  "id": "/linkerdcos",
  "groups": [
    {
      "id": "/linkerdcos/cluster",
      "apps": [
        {
          "id": "/linkerdcos/cluster/clustermgmt",
          "instances": 1,
          "cpus": 0.5,
          "mem": 512,
          "dependencies": [
            "/linkerdcos/cluster/mongodb"
          ],
          "labels": {
            "HAPROXY_GROUP": "linkermgmt"
          },
          "container": {
            "type": "DOCKER",
            "docker": {
              "image": "linkerrepository/linkerdcos_clustermgmt:latest",
              "network": "BRIDGE",
              "portMappings": [
                {
                  "containerPort": 10002,
                  "hostPort": 0,
                  "servicePort": 10002,
                  "protocol": "tcp"
                }
              ],
              "privileged": true,
              "forcePullImage": true
            },
            "volumes": [
              {
                "containerPath": "/var/log",
                "hostPath": "/var/log",
                "mode": "RW"
              }
            ]
          },
          "env": {
            "MONGODB_NODES": "xxxx,xxxx,xxxx"
          },
          "constraints": [
            [
              "hostname",
              "UNIQUE"
            ]
          ]
        },
        {
          "id": "/linkerdcos/cluster/usermgmt",
          "instances": 1,
          "cpus": 0.5,
          "mem": 512,
          "dependencies": [
            "/linkerdcos/cluster/mongodb"
          ],
          "labels": {
            "HAPROXY_GROUP": "linkermgmt"
          },
          "container": {
            "type": "DOCKER",
            "docker": {
              "image": "linkerrepository/linkerdcos_usermgmt:latest",
              "network": "BRIDGE",
              "portMappings": [
                {
                  "containerPort": 10001,
                  "hostPort": 0,
                  "servicePort": 10001,
                  "protocol": "tcp"
                }
              ],
              "privileged": true,
              "forcePullImage": true
            },
            "volumes": [
              {
                "containerPath": "/var/log",
                "hostPath": "/var/log",
                "mode": "RW"
              }
            ]
          },
          "env": {
            "MONGODB_NODES": "xxxx,xxxx,xxxx"
          },
          "constraints": [
            [
              "hostname",
              "UNIQUE"
            ]
          ]
        },
        {
          "id": "/linkerdcos/cluster/mongodb",
          "cpus": 0.5,
          "mem": 1024,
          "instances": 3,
          "ports": [
            27017
          ],
          "requirePorts": true,
          "container": {
            "type": "DOCKER",
            "docker": {
              "image": "linkerrepository/linkerdcos_mongodb_repl:latest",
              "network": "HOST",
              "privileged": true,
              "forcePullImage": true
            },
            "volumes": [
              {
                "containerPath": "/data",
                "hostPath": "/opt",
                "mode": "RW"
              }
            ]
          },
          "constraints": [
            [
              "hostname",
              "UNIQUE"
            ]
          ],
          "env": {
            "MONGODB_NODES": "xxxx,xxxx,xxxx"
          }
        }
      ]
    },
    {
      "id": "/linkerdcos/portal",
      "apps": [
        {
          "id": "/linkerdcos/portal/ui",
          "cpus": 0.5,
          "mem": 1024,
          "instances": 1,
          "labels": {
            "HAPROXY_GROUP": "linkermgmt"
          },
          "container": {
            "type": "DOCKER",
            "docker": {
              "network": "BRIDGE",
              "portMappings": [
                {
                  "containerPort": 3000,
                  "hostPort": 0,
                  "servicePort": 10010,
                  "protocol": "tcp"
                }
              ],
              "image": "linkerrepository/linker_dcos_portal:latest",
              "privileged": true,
              "forcePullImage": true
            },
            "volumes": [
              {
                "containerPath": "/var/log",
                "hostPath": "/var/log",
                "mode": "RW"
              }
            ]
          },
          "constraints": [
            [
              "hostname",
              "UNIQUE"
            ]
          ]
        },
        {
          "id": "/linkerdcos/portal/redis",
          "cpus": 0.5,
          "mem": 1024,
          "instances": 1,
          "labels": {
            "HAPROXY_GROUP": "linkermgmt"
          },
          "container": {
            "type": "DOCKER",
            "docker": {
              "image": "linkerrepository/liner_dcos_redis:latest",
              "network": "BRIDGE",
              "portMappings": [
                {
                  "containerPort": 6379,
                  "hostPort": 0,
                  "servicePort": 10011,
                  "protocol": "tcp"
                }
              ],
              "privileged": true,
              "forcePullImage": true
            },
            "volumes": [
              {
                "containerPath": "/var/log/redis",
                "hostPath": "/var/log/redis",
                "mode": "RW"
              }
            ]
          },
          "constraints": [
            [
              "hostname",
              "UNIQUE"
            ]
          ]
        }
      ]
    },
    {
      "id": "goproxy",
      "apps": [
        {
          "id": "deployer",
          "cpus": 0.5,
          "mem": 1024,
          "instances": 1,
          "labels": {
            "HAPROXY_GROUP": "linkermgmt"
          },
          "container": {
            "type": "DOCKER",
            "docker": {
              "network": "BRIDGE",
              "portMappings": [
                {
                  "containerPort": 10003,
                  "hostPort": 0,
                  "servicePort": 10003,
                  "protocol": "tcp"
                }
              ],
              "image": "linkerrepository/linker_dcos_deployer:latest",
              "privileged": true,
              "forcePullImage": true
            }
          },
          "constraints": [
            [
              "hostname",
              "UNIQUE"
            ]
          ]
        }
      ]
    }
  ]
}
